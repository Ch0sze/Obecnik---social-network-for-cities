<!-- Right Sidebar -->
<link rel="stylesheet" href="~/css/SidebarStyles.css" asp-append-version="true"/>
<div class="sidebar-sb right-sidebar-sb">

    <!-- Profile Header (right sidebar-specific) -->
    <div class="profile-header-sb">
        <!-- Icon Button for User Profile (Redirect to /Account on click) -->
        <button class="icon-btn-sb" id="user-profile-btn-sb">
            <i class="bi bi-person"></i>
        </button>
        <!-- Display the logged-in username -->
        <span class="text-sb" id="username-sb">@User.Identity?.Name</span>
        <!-- Hamburger Menu Button -->
        <button class="icon-btn-sb" id="hamburger-menu-btn-sb">
            <i class="bi bi-box-arrow-right"></i>
        </button>
    </div>

    <!-- Dropdown Menu (Initially hidden) -->
    <div id="dropdown-menu-sb" class="dropdown-menu-sb" style="display: none;">
        <button class="dropdown-item-sb" id="logout-btn-sb">Odhlásit se</button>
    </div>

    <!-- User Avatars (Dynamic) -->
    <div id="user-list-sb" class="avatar-scroll-sb"></div>

    <!-- Petition Section (right sidebar-specific) -->
    <!--<div class="petition-sb">
        <h5 class="text-sb" id="petition-title-sb">Název petice</h5>
        <p class="text-sb" id="petition-description-sb">Popis petice</p>
        <div class="d-flex">
            <span class="signature-count-sb" id="petition-signatures-sb">123 podpisů</span>
            <button class="btn-sign-sb" id="sign-btn-sb">Podepsat</button>
        </div>
    </div>-->
</div>

<!-- Dynamic JavaScript -->
<script>
    /*const users = [
        { name: "Jožka Nula", image: "/Images/GenericAvatar.png" },
        { name: "Michaela Černá", image: "/Images/GenericAvatar.png" },
        { name: "Petr Novák", image: "/Images/GenericAvatar.png" },
        { name: "Anna Horáková", image: "/Images/GenericAvatar.png" }
    ];*/

    /*const petition = {
        title: "Nové lavičky",
        description: "Žádáme o opravu veřejných laviček ve městě. Podpořte nás podpisem!",
        signatures: 217
    };*/

    // Render avatars dynamically in the right sidebar
    function renderAvatars() {
        const userList = document.getElementById('user-list-sb');
        userList.innerHTML = '';

        users.forEach((user, index) => {
            const item = document.createElement('div');
            item.className = 'user-item-sb';
            item.innerHTML = `
                <button class="avatar-btn-sb" onclick="onAvatarClick(${index})">
                    <img src="${user.image}" alt="${user.name}">
                </button>
                <span class="text-sb">${user.name}</span>
            `;
            userList.appendChild(item);
        });
    }

    // Render petition dynamically in the right sidebar
    function renderPetition() {
        document.getElementById('petition-title-sb').innerText = petition.title;
        document.getElementById('petition-description-sb').innerText = petition.description;
        document.getElementById('petition-signatures-sb').innerText = `${petition.signatures} podpisů`;
    }

    // Initialize content
    /*renderAvatars();
    renderPetition();*/

    // Toggle dropdown menu visibility when hamburger menu is clicked
    const hamburgerMenuBtn = document.getElementById('hamburger-menu-btn-sb');
    const dropdownMenu = document.getElementById('dropdown-menu-sb');
    

    // Redirect to /Account/Logout when "Odhlásit se" is clicked
    const logoutBtn = document.getElementById('logout-btn-sb');
    logoutBtn.addEventListener('click', () => {
        window.location.href = '/Account/Logout'; // Redirect to the logout page
    });

    // // Redirect to /Account when user profile button is clicked
    // const userProfileBtn = document.getElementById('user-profile-btn-sb');
    // userProfileBtn.addEventListener('click', () => {
    //     window.location.href = '/Account'; // Redirect to the account page
    // });

    // Toggle dropdown menu visibility when hamburger menu is clicked

    hamburgerMenuBtn.addEventListener('click', function() {
        window.location.href = '/Account/Logout';
        /*const buttonRect = hamburgerMenuBtn.getBoundingClientRect();

        // Position the dropdown below the button and shift it 50px to the left
        dropdownMenu.style.top = `${buttonRect.bottom + window.scrollY}px`; // Position it below the button
        dropdownMenu.style.left = `${buttonRect.left + window.scrollX - 50}px`; // Shift 50px to the left

        // Toggle visibility of dropdown
        dropdownMenu.style.display = (dropdownMenu.style.display === 'block') ? 'none' : 'block';*/
    });

    // Handle avatar click (you can add specific logic here if needed)
    /*function onAvatarClick(index) {
        alert(`Clicked on user: ${users[index].name}`);
    }*/
</script>


